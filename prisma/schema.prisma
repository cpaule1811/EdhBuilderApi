generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id       Int       @id @default(autoincrement())
    username String
    email    String    @unique
    joined   DateTime?
    profile  String?
    hash     String
    rating   Rating[]
    Deck     Deck[]
}

model Deck {
    id              Int       @id @default(autoincrement())
    user            User      @relation(fields: [userId], references: [id])
    userId          Int
    name            String
    commander       String
    created         DateTime?
    partner         String?
    description     String?
    imageUrl        String?
    imageUrl2       String?
    partnerImageUrl String?
    cardArt         String?
    color           String?
    artist          String?
    avgRating       Float?
    cards           Card[]
    rating          Rating[]
}

model Card {
    id         Int     @id @default(autoincrement())
    quantity   Int
    cardStatus String?
    entry      Entry   @relation(fields: [entryId], references: [id])
    entryId    Int
    Deck       Deck?   @relation(fields: [deckId], references: [id])
    deckId     Int?
}

model Rating {
    id     Int   @id @default(autoincrement())
    deck   Deck  @relation(fields: [deckId], references: [id])
    deckId Int
    rating Float
    user   User  @relation(fields: [userId], references: [id])
    userId Int
}

model Entry {
    id           Int      @id @default(autoincrement())
    cardName     String   @unique
    type         String?
    price        Float?
    cmc          Int?
    modal        String?
    imageUrl     String?
    imageUrl2    String?
    colour       String?
    manaCost     String?
    producedMana String?
    isLegal      Boolean?
    cardArt      String?
    oracleText   String?
    isPartner    Boolean?
    artist       String?
    Card         Card[]
}
